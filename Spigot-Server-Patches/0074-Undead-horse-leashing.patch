From b6a9059c74eb186bbe7b487c185a37e98a4d5edc Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Sat, 30 Sep 2017 22:54:14 -0400
Subject: [PATCH] Undead horse leashing

Default false to match vanilla, but option to allow undead horse types to be leashed.

diff --git a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
index 4d98e45..d77a1e6 100644
--- a/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperWorldConfig.java
@@ -251,4 +251,9 @@ public class PaperWorldConfig {
     private void nonPlayerEntitiesOnScoreboards() {
         nonPlayerEntitiesOnScoreboards = getBoolean("allow-non-player-entities-on-scoreboards", false);
     }
+
+    public boolean allowLeashingUndeadHorse = false;
+    private void allowLeashingUndeadHorse() {
+        allowLeashingUndeadHorse = getBoolean("allow-leashing-undead-horse", false);
+    }
 }
diff --git a/src/main/java/net/minecraft/entity/passive/AbstractHorse.java b/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
index 968c831..df49058 100644
--- a/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
+++ b/src/main/java/net/minecraft/entity/passive/AbstractHorse.java
@@ -168,7 +168,7 @@ public abstract class AbstractHorse extends EntityAnimal implements IInventoryCh
     }
 
     public boolean canBeLeashedTo(EntityPlayer player) {
-        return super.canBeLeashedTo(player) && this.getCreatureAttribute() != EnumCreatureAttribute.UNDEAD;
+        return world.paperConfig.allowLeashingUndeadHorse ? super.canBeLeashedTo(player): super.canBeLeashedTo(player) && this.getCreatureAttribute() != EnumCreatureAttribute.UNDEAD; // Paper
     }
 
     protected void onLeashDistance(float p_142017_1_) {
-- 
2.14.1.windows.1

