From 12df5df25ff3641bc3f6ad8b9c865ca72d4e8afb Mon Sep 17 00:00:00 2001
From: kashike <kashike@vq.lc>
Date: Tue, 10 Oct 2017 16:06:17 -0400
Subject: [PATCH] Configurable flying kick messages


diff --git a/src/main/java/com/destroystokyo/paper/PaperConfig.java b/src/main/java/com/destroystokyo/paper/PaperConfig.java
index 2001175..621c585 100644
--- a/src/main/java/com/destroystokyo/paper/PaperConfig.java
+++ b/src/main/java/com/destroystokyo/paper/PaperConfig.java
@@ -244,4 +244,11 @@ public class PaperConfig {
         }
         packetInSpamThreshold = getInt("settings.incoming-packet-spam-threshold", 300);
     }
+
+    public static String flyingKickPlayerMessage = "Flying is not enabled on this server";
+    public static String flyingKickVehicleMessage = "Flying is not enabled on this server";
+    private static void flyingKickMessages() {
+        flyingKickPlayerMessage = getString("messages.kick.flying-player", flyingKickPlayerMessage);
+        flyingKickVehicleMessage = getString("messages.kick.flying-vehicle", flyingKickVehicleMessage);
+    }
 }
diff --git a/src/main/java/net/minecraft/network/NetHandlerPlayServer.java b/src/main/java/net/minecraft/network/NetHandlerPlayServer.java
index 28b67ac..6da0a93 100644
--- a/src/main/java/net/minecraft/network/NetHandlerPlayServer.java
+++ b/src/main/java/net/minecraft/network/NetHandlerPlayServer.java
@@ -305,7 +305,7 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer, ITickable {
         if (this.floating) {
             if (++this.floatingTickCount > 80) {
                 LOGGER.warn("{} was kicked for floating too long!", (Object) this.player.getName());
-                this.disconnect(new TextComponentTranslation("multiplayer.disconnect.flying", new Object[0]));
+                this.disconnect(com.destroystokyo.paper.PaperConfig.flyingKickPlayerMessage); // Paper - use configurable kick message")
                 return;
             }
         } else {
@@ -326,7 +326,7 @@ public class NetHandlerPlayServer implements INetHandlerPlayServer, ITickable {
             if (this.vehicleFloating && this.player.getLowestRidingEntity().getControllingPassenger() == this.player) {
                 if (++this.vehicleFloatingTickCount > 80) {
                     LOGGER.warn("{} was kicked for floating a vehicle too long!", (Object) this.player.getName());
-                    this.disconnect(new TextComponentTranslation("multiplayer.disconnect.flying", new Object[0]));
+                    this.disconnect(com.destroystokyo.paper.PaperConfig.flyingKickVehicleMessage); // Paper - use configurable kick message)
                     return;
                 }
             } else {
-- 
2.14.2.windows.2

